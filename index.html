<!DOCTYPE html>
<head>
    <title>Eames Tower</title>
    
    <style>
        
        .container { display: flex; justify-content: space-between; flex-wrap: wrap; margin-top: 15vh; }
        .ball { border-radius: 50%; width: 70px; height: 70px; background-color:beige; position: fixed; left: calc(50% - 35px); top: 5vh; }
        
        /* .key { width: 52vw; height: 7vh; margin-top: 2em; background-color: azure; } */
         .key { width: 52vw; height: 80px; margin-top: 20px; background-color: azure; } 
        .right { margin-left: auto; }
    </style>
    <script>
        /* auto generation of new keys */
        document.addEventListener("scroll", addKey);
        
        /*if vertical scroll reaches 80% of body height, then append two divs*/       
        function addKey() {
            findKey();
            var scroll = document.body.scrollTop;
            var docHeight = document.documentElement.scrollHeight/2.0 * .8;
            if(scroll >= docHeight) {
                var leftkey = document.createElement("div");
                leftkey.className = "key";
                document.querySelector(".container").appendChild(leftkey);
                var rightkey = document.createElement("div");
                rightkey.className = "key right";
                document.querySelector(".container").appendChild(rightkey);
            }
        }

        /* TODO: keys change color & play sounds when interacting with ball */
        function findKey() {
            console.log("in findkey");
            //key height + margin 
            //TODO make this dyanmic based on VH
            var keySpace = 80 + 20;
            var scroll = document.body.scrollTop;
            var curKey = scroll/keySpace;
            curKey = Math.round(curKey) - 1; 
            console.log(curKey);
            var key = document.querySelector(".container").getElementsByTagName("div")[curKey];
            key.style.backgroundColor = 'blue';
            var oldKey = document.querySelector(".container").getElementsByTagName("div")[curKey-1];
            oldKey.style.backgroundColor = 'azure';
        }
        
        
        
    </script>
</head>
<body>

    <div class="ball"></div>
    
    <div class="container">
        <div class="key"></div>
        <div class="key right"></div>
        <div class="key"></div>
        <div class="key right"></div>
        <div class="key"></div>
        <div class="key right"></div>
        <div class="key"></div>
        <div class="key right"></div>
        <div class="key"></div>
        <div class="key right"></div>
        <div class="key"></div>
        <div class="key right"></div>
        <div class="key"></div>
        <div class="key right"></div>
        <div class="key"></div>
        <div class="key right"></div>
    </div>
</body>
</html>